<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ crag_details.crag_name }} | Hyped - Log your sends and discover new projects</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
    <div class="sidebar">
        <a href="/home"><img src="/static/Hyped_logo_w265x155.png" alt="Hyped Logo" class="logo"></a>
        <nav>
            <ul>
                <li><a href="/favourites">Favourite crags</a></li>
                <li><a href="/ticklist">Tick-list</a></li>
                <li><a href="/logged-sends">Logged sends</a></li>
            </ul>
            <br>
            <ul>
                <li><a href="/crags">Browse all crags</a></li>
                <li><a href="/climbs">Browse all climbs</a></li>
                <li><a href="/random">Random crag &amp; climb</a></li>
            </ul>
            <br>
            {% if admin %}
            <ul>
                <li><a href="/add-crag">Add crag</a></li>
                <li><a href="/add-climb">Add climb</a></li>
            </ul>
            <br>
            {% endif %}
            <ul>
                <li><a href="/profile">Profile</a></li>
                <li><a href="/thesaurus">Thesaurus</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </div>
    <div class="container">
        <h1>{{ crag_details.crag_name }}</h1> 
        <p>
            <span>&#x2022;</span>
            {{ crag_details.crag_description }}
        </p>
        <hr> 
        <h2>Crag information</h2> 
        <hr> 
        <p>
            Number of climbs: <b>{{ climb_count }}</b><br>
            Highest grade: <b>{{ max_min.max_grade }}</b><br>
            Lowest grade: <b>{{ max_min.min_grade }}</b><br>
            <br>
            Latitude: <b>{{ crag_details.latitude }}</b><br>
            Longitude: <b>{{ crag_details.longitude }}</b><br>
            Managed by: <b>{{ crag_details.manager }}</b><br>
            <br>
            Marked favourite by <b>{{ fav_count}}</b> user(s)
        </p>
        <!-- If crag in favourites, show "Remove from favourites", else show "Add to favourites" button -->
        {% if is_favourite %}
        <form class="form-remove-from" action="/remove-from-favourites/{{ crag_details.id }}" method="post">
            <button type="submit" class="btn-delete">Remove from favourites</button>
            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        </form>
        {% else %}
        <form class="form-add-to" action="/add-to-favourites/{{ crag_details.id }}" method="post">
            <button type="submit" class="btn-add-to">Add to favourites</button>
            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        </form>
        {% endif %}
        {% with messages = get_flashed_messages(with_categories=true) %} 
        {% if messages %} 
        <ul> 
            {% for category, message in messages %} 
            <li class="{{ category }}">{{ message }}</li> 
            {% endfor %} 
        </ul> 
        {% endif %} 
        {% endwith %}
        <hr> 
        <h2>Climbs at the crag</h2>
        <hr> 
        {% for climb in climbs_at_crag %}
        <h3> {{ climb.climb_name }}, {{ climb.difficulty }}</h3>
        <p>
            <span>&#x2022;</span>
            {{ climb.climb_description }}<br>
            <br>
            Type: <b>{{ climb.climb_type }}</b><br>
            First ascent: <b>{{ climb.first_ascent }}</b>
        </p>
        <form action="/climbs/{{ climb.id }}" class="btn-go-to" method="get">
            <button type="submit">Go to climb</button>
        </form>
        <hr> 
        {% endfor %}
    </div>
</body>
</html>